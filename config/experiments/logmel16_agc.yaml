# Log-mel 16 features with audio-level AGC normalization
# Test: Smaller log-mel feature set with normalization

data:
  preprocessed_dir: "data/preprocessed_log_mel_16_norm"
  val_split: 0.20
  test_split: 0.10
  raw_dir: "data/speech_commands_v0.02"
  
  features:
    type: log-mel
    sample_rate: 16000
    n_features: 16
    frame_length_s: 0.032
    hop_length_s: 0.016
    fixed_duration_s: 1.024
    normalize: true  # Audio AGC normalization

augmentation:
  enable: true
  max_shift_ms: 100
  noise_prob: 0.15
  noise_std_factor: 0.05
  seed: 0

task:
  type: multiclass
  class_list: ["yes", "no", "up", "down", "left", "right", "on", "off", "stop", "go"]
  include_unknown: true
  include_background: false

model:
  # Core
  hidden_channels: 26
  kernel_size: 3
  dropout: 0.2

  # Depth
  num_blocks: 4

  # Convolutional block options
  causal: true
  activation: relu
  norm: batch
  groups_for_groupnorm: 8
  use_weight_norm: false
  depthwise_separable: false
  pool: avg
  bias: false

train:
  batch_size: 32
  num_epochs: 100
  learning_rate: 1.0e-4
  weight_decay: 1.0e-5
  device: auto

  # Early stopping configuration
  early_stopping:
    enabled: true
    patience: 10             # Stop if no improvement for 10 epochs
    metric: "val_loss"        # Monitor validation loss
    min_delta: 0.001         # Minimum change to qualify as improvement
    restore_best: true       # Load best weights before stopping

  # DataLoader performance knobs
  num_workers: 2
  pin_memory: true
  persistent_workers: true
  prefetch_factor: 2

qat:
  weight_bits: 3
  act_bits: 5
  weight_symmetric: true
  act_symmetric: false
  weight_use_global_scale: true
  act_use_global_scale: true
  warmup_epochs: 1
  batch_size: 32
  num_epochs: 5
  learning_rate: 1.0e-5
  dropout: 0.10

output:
  weights_dir: "checkpoints/logmel16_agc"
  plots_dir: "plots/logmel16_agc"
  tqdm: true